<!DOCTYPE html>
<html lang="es">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AR ‚Äì 22 Banderas</title>

  <!-- A-Frame y MindAR (CDN) -->
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

  <link rel="stylesheet" href="./css/Ar.css" />
</head>
<body>
  <!-- Estado del sistema -->
  <div id="status" class="banner">Cargando‚Ä¶</div>

  <!-- Toolbar -->
  <div id="toolbar">
    <button id="btnAnim">‚è∏Ô∏è Pausar animaci√≥n</button>
    <button id="btnTrivia" style="display:none">‚ùì Trivia</button>
    <button id="btnVideo"  style="display:none">üé¨ Video</button>
  </div>

  <!-- Escena principal -->
  <a-scene
    id="scene"
    mindar-image="imageTargetSrc: ./assets/targets/todosBanderas.mind?v=1"
    color-space="sRGB"
    renderer="colorManagement: true, physicallyCorrectLights"
    vr-mode-ui="enabled:false"
    device-orientation-permission-ui="enabled:false"
    embedded
    loading-screen="enabled:true">

    <!-- Precarga de im√°genes + modelos -->
    <a-assets>
      <!-- Banderas -->
      <img id="flag0"  src="./assets/targets/arabia-saudita.jpg" />
      <img id="flag1"  src="./assets/targets/Argelia.png" />
      <img id="flag2"  src="./assets/targets/argentina.jpg" />
      <img id="flag3"  src="./assets/targets/Australia.png" />
      <img id="flag4"  src="./assets/targets/Brasil.png" />
      <img id="flag5"  src="./assets/targets/cabo-verde.png" />
      <img id="flag6"  src="./assets/targets/canada.png" />
      <img id="flag7"  src="./assets/targets/catar.jpg" />
      <img id="flag8"  src="./assets/targets/Colombia.png" />
      <img id="flag9"  src="./assets/targets/corea-del-sur.png" />
      <img id="flag10" src="./assets/targets/costa-de-marfil.png" />
      <img id="flag11" src="./assets/targets/Ecuador.png" />
      <img id="flag12" src="./assets/targets/estados-unidos.png" />
      <img id="flag13" src="./assets/targets/Inglaterra.png" />
      <img id="flag14" src="./assets/targets/Iran.png" />
      <img id="flag15" src="./assets/targets/japon.png" />
      <img id="flag16" src="./assets/targets/jordania.png" />
      <img id="flag17" src="./assets/targets/Mexico.png" />
      <img id="flag18" src="./assets/targets/Paraguay.png" />
      <img id="flag19" src="./assets/targets/Senegal.png" />
      <img id="flag20" src="./assets/targets/sudafrica.png" />
      <img id="flag21" src="./assets/targets/Uruguay.png" />

      <!-- Modelos 3D -->
      <a-asset-item id="mdlArabia"    src="./assets/models/Arabia Saudita.glb"></a-asset-item>
      <a-asset-item id="mdlArgentina" src="./assets/models/argentina.glb"></a-asset-item>
      <a-asset-item id="mdlBalon"     src="./assets/models/balon.glb"></a-asset-item>
      <a-asset-item id="mdlUSA"       src="./assets/models/estadosunidos.glb"></a-asset-item>
      <a-asset-item id="mdlMexico"    src="./assets/models/Mexico.glb"></a-asset-item>
      <a-asset-item id="mdlCanada"    src="./assets/models/Canada.glb"></a-asset-item>
      <a-asset-item id="mdlCheese"    src="./assets/models/cheeseburger_-_low_poly.glb"></a-asset-item>
      <a-asset-item id="mdlDonut"     src="./assets/models/chocolate_donut.glb"></a-asset-item>
      <a-asset-item id="mdlCoffee"    src="./assets/models/coffee_cupsaucer_free_3d_model.glb"></a-asset-item>
      <a-asset-item id="mdlCorea"     src="./assets/models/CoreadelSur.glb"></a-asset-item>
      <a-asset-item id="mdlJapon"     src="./assets/models/japon.glb"></a-asset-item>
      <a-asset-item id="mdlCopa"      src="./assets/models/fifa_world_cup_trophy_2026_weare26.glb"></a-asset-item>
      <a-asset-item id="mdlBote"      src="./assets/models/botedeagua.glb"></a-asset-item>
    </a-assets>

    <!-- Luces -->
    <a-entity light="type: directional; intensity: 1.1" position="1 1 1"></a-entity>
    <a-entity light="type: ambient; intensity: 0.6"></a-entity>

    <!-- C√°mara -->
    <a-camera position="0 0 0" look-controls="enabled:false"></a-camera>

    <!-- Contenedor de anclas -->
    <a-entity id="anchors-root"></a-entity>
  </a-scene>

  <!-- Modal de Trivia -->
  <div id="triviaModal" class="modal hidden" aria-hidden="true">
    <div class="modal-backdrop" data-close="true"></div>
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="triviaTitle">
      <div class="modal-header">
        <h3 id="triviaTitle">Trivia</h3>
        <button class="close" id="triviaClose" aria-label="Cerrar">‚úñ</button>
      </div>
      <div class="modal-body">
        <div id="triviaCountry" class="country"></div>
        <div id="triviaProgress" class="progress"></div>
        <div id="triviaQuestion" class="question"></div>
        <ul id="triviaOptions" class="options"></ul>
        <div class="actions">
          <button id="triviaNext" disabled>Siguiente</button>
          <button id="triviaFinish" class="hidden">Finalizar</button>
        </div>
        <div id="triviaResult" class="result hidden"></div>
      </div>
    </div>
  </div>

  <!-- Modal de Video (YouTube) -->
  <div id="videoModal" class="modal hidden" aria-hidden="true">
    <div class="modal-backdrop" data-close="true"></div>
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="videoTitle">
      <div class="modal-header">
        <h3 id="videoTitle">Video del pa√≠s</h3>
        <button class="close" id="videoClose" aria-label="Cerrar">‚úñ</button>
      </div>
      <div class="modal-body">
        <div id="videoCountry" class="country"></div>
        <div class="video-wrap">
          <iframe id="ytFrame"
                  class="yt"
                  title="YouTube video player"
                  frameborder="0"
                  allow="autoplay; encrypted-media; picture-in-picture; web-share"
                  allowfullscreen
                  style="width:100%; height:100%; border-radius:10px;"></iframe>
        </div>

        <!-- ===== Controles de filtro (r√°pido y simple) ===== -->
        <div class="video-tools">
          <label>
            Filtro:
            <select id="videoFilter">
              <option value="none">Sin filtro</option>
              <option value="grayscale">Blanco y negro</option>
              <option value="sepia">Sepia</option>
              <option value="saturate">Saturaci√≥n</option>
              <option value="hue">Tono (Hue)</option>
              <option value="contrast">Contraste</option>
              <option value="brightness">Brillo</option>
              <option value="blur">Desenfoque</option>
              <option value="invert">Invertir</option>
            </select>
          </label>

          <label id="videoFilterAmountWrap" style="display:none">
            Intensidad:
            <input id="videoFilterAmount" type="range" min="0" max="200" value="100" />
          </label>
        </div>
        <!-- ================================================ -->
      </div>
    </div>
  </div>

  <script src="./js/app.js" defer></script>
</body>
</html>
